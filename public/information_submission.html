<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Information Submission</title>
</head>
<style>
    button {
        color: white;
        width: 85px;
        background: steelblue;
    }
</style>

<body style="background: slategray">
    <br>
    <br>
    <div align="center" style="background: lightblue; width: 50%; height: 600px; margin: auto; border-radius: 100px;">
        <br>
        <h1>Drone Stats</h1>
        <table>
            <tr>
                <th align="left" width="115">Max Weight:</th>
                <th><input type="text" name="max_weight" title="max_weight"></th>
            </tr>
            <tr>
                <th align="left">Max Distance:</th>
                <th><input type="text" name="max_distance" title="max_distance"></th>
            </tr>
            <tr>
                <th align="left">Drone Count:</th>
                <th><input type="text" name="drone_count" title="drone_count"></th>
            </tr>
            <tr>
                <th align="left">Cargo Capacity:</th>
                <th><input type="text" name="cargo_capacity" title="cargo_capacity"></th>
            </tr>
        </table>

        <h1>Package Info</h1>
        <table>
            <tr>
                <th align="left" width="50">Height:</th>
                <th><input type="text" name="height" title="height" id="height"></th>
            </tr>
            <tr>
                <th align="left">Width:</th>
                <th><input type="text" name="width" title="width" id="width"></th>
            </tr>
            <tr>
                <th align="left">Length:</th>
                <th><input type="text" name="length" title="length" id="length"></th>
            </tr>
            <tr>
                <th align="left">Weight:</th>
                <th><input type="text" name="weight" title="weight" id="weight"></th>
            </tr>
            <tr>
                <th align="left">X:</th>
                <th><input type="text" name="x" title="weight" id="x"></th>
            </tr>
            <tr>
                <th align="left">Y:</th>
                <th><input type="text" name="y" title="weight" id="y"></th>
            </tr>
            <tr align="left">
                <th></th>
                <th><button onclick="addPackage()">Add Package</button></th>
            </tr>
            <tr align="left">
                <th></th>
                <th><button>Submit</button></th>
            </tr>
        </table>

        <h3>- OR - </h3>

        <form>
            <input type="file" name="file" accept=".json">
            <button>Submit</button>
        </form>
    </div>
</body>
<script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
<script>
    var packages = [];

    var socket = io('/admin');

    function createOrder() {
        var maxWeight = document.getElementsByName("max_weight");
        var maxDistance = document.getElementsByName("max_distance");
        var droneCount = document.getElementsByName("drone_count");
        var cargoCapacity = document.getElementById("cargo_capacity");
        //send these variables to some function + packages array.

        var droneStats = {
            maxDistance,
            maxWeight,
            numDrones: droneCount,
            numPackages: cargoCapacity,
        };
        
        socket.emit('admin:pass:details', {
            droneStats,
            packages
        })
    }

    function addPackage() {

        var packageInfo = {};

        packageInfo.weight = document.getElementById("weight").value;
        packageInfo.height = document.getElementById("height").value;
        packageInfo.width = document.getElementById("width").value;
        packageInfo.length = document.getElementById("length").value;
        packageInfo.x = document.getElementById("x").value;
        packageInfo.y = document.getElementById("y").value;


        if (!(packageInfo.x === "" || packageInfo.y === "" || packageInfo.weight === "")) {
            packages.push(packageInfo);
            document.getElementById("weight").value = "";
            document.getElementById("height").value = "";
            document.getElementById("width").value = "";
            document.getElementById("length").value = "";
            document.getElementById("x").value = "";
            document.getElementById("y").value = "";

        }

        else {
            alert("Null value in object");
        }
    }
</script>

</html>